import{h as w,j as T,k as b,l as S,m as D,r as h,a as F,n as z,p as f,b as k,q as E,o as n,d as c,g as t,e as s,t as i,s as m,v as L,x as N,y as V,F as $,f as G,c as U,w as j,i as q}from"./index-d323e09d.js";const K=w({id:"Trailer",state:()=>({movieTrailer:null,tvTrailer:null,url:"https://api.themoviedb.org/3/",params:`/videos?api_key=${T}&language=ru-RU`}),actions:{async getTrailer({type:l,id:o}){try{(await b.get(`${this.url}${l}/${o}${this.params}`)).data.results.forEach(a=>{a.size==1080&&(l=="movie"?this.movieTrailer=a.key:this.tvTrailer=a.key)})}catch(r){console.error("Произошла ошибка при получении трейлера",r)}}}}),Y=w({id:"rec",state:()=>({recMovies:[],recTvs:[],url:"https://api.themoviedb.org/3/",params:`/recommendations?api_key=${T}&language=ru-RU&page=1`}),actions:{async getRec(l,o){try{(await b.get(`${this.url}${l}/${o}${this.params}`)).data.results.forEach(a=>{l=="movie"?this.recMovies.length<4&&this.recMovies.push(a):this.recTvs.length<4&&this.recTvs.push(a)})}catch(r){console.error("Произошла ошибка при получении рекоммендаций",r)}}}}),H={key:0,class:"media-info active current"},J={class:"media-info-content"},O={class:"media-info-content-block"},P={class:"media-info-content-block-descr"},Q=["href"],W={alt:""},X={key:1,class:"container media-descr"},Z=s("h3",null,"Бюджет",-1),ee={key:0},te={key:1},se=s("h3",null,"Сборы",-1),oe={key:0},ae={key:1},ie=s("h3",null,"Статус",-1),re=s("h3",null,"Исходное название",-1),ne={class:"container rec"},le=s("h2",null,"Рекомендации",-1),ce={class:"rec-content"},ue=["src"],_e={__name:"Media",props:["type"],setup(l){const o=l,r=S(),a=D(),_=K(),p=Y();let e=h(null),M=h(null),v=h(null),y=h(null);F(async()=>{await r.getItemById({type:o.type,id:z().params.id}),e.value=o.type=="movie"?r.movie:r.tv,await a.getActors({type:o.type,id:e.value.id,count:6}),M.value=o.type=="movie"?a.actorsMovie:a.actorsTv,await _.getTrailer({type:o.type,id:e.value.id}),v.value=o.type=="movie"?_.movieTrailer:_.trailerTv,await p.getRec(o.type,e.value.id),y.value=o.type=="movie"?p.recMovies:p.recTvs});const B=f(()=>o.type=="movie"?a.actorsMovie:a.actorsTv),I=f(()=>e.value.genres.reduce((u,g)=>u+`, ${g.name}`,"")),R=async u=>{await r.getItemById({type:o.type,id:u}),window.location.reload()};return(u,g)=>{const C=k("Actors"),x=k("RouterLink"),A=E("lazy");return n(),c($,null,[t(e)?(n(),c("div",H,[s("div",J,[s("div",O,[s("h2",null,i(t(e).title||t(e).name),1),s("p",null,i(t(e).overview||"Неописуемый..."),1),s("p",P,[s("span",null,i(new Date(t(e).release_date||t(e).first_air_date).getFullYear()),1),s("span",null,i(I.value),1),s("span",null,i(l.type=="movie"?`${Math.floor(t(e).runtime/60)}h ${t(e).runtime%60}m`:`${t(e).number_of_seasons}s ${t(e).number_of_episodes}e`),1)]),t(v)?(n(),c("a",{key:0,href:"https://www.youtube.com/watch/"+t(v),class:"btn-more",target:"blank"},"Смотреть трейлер",8,Q)):m("",!0),L(C,{actors:B.value},null,8,["actors"])]),N(s("img",W,null,512),[[A,t(V)+t(e).backdrop_path]])])])):m("",!0),t(e)?(n(),c("ul",X,[s("li",null,[Z,t(e).budget?(n(),c("p",ee,i("$"+t(e).budget),1)):(n(),c("p",te,i("Неизвестно")))]),s("li",null,[se,t(e).revenue?(n(),c("p",oe,i("$"+t(e).revenue),1)):(n(),c("p",ae,i("Неизвестно")))]),s("li",null,[ie,s("p",null,i(t(e).status||"Неизвестно"),1)]),s("li",null,[re,s("p",null,i(t(e).original_title||"Неизвестно"),1)])])):m("",!0),s("section",ne,[le,s("div",ce,[(n(!0),c($,null,G(t(y),d=>(n(),U(x,{to:`/${l.type}/${d.id}`,key:d.id,onClick:de=>R(d.id)},{default:j(()=>[s("img",{src:t(q)+d.poster_path,alt:""},null,8,ue)]),_:2},1032,["to","onClick"]))),128))])])],64)}}};export{_e as _};
